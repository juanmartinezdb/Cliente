<form [formGroup]="registroForm" (ngSubmit)="onSubmit()">
    <h2 class="mb-4 text-center">Registro de Eventos</h2>
  
    <!-- Datos Sucursal -->
    <div class="card shadow-sm p-3 mb-4">
      <h5 class="card-title">Datos Sucursal</h5>
      <div class="mb-3">
        <label for="hotel" class="form-label">Hotel:</label>
        <select id="hotel" formControlName="hotel" class="form-select"
          [ngClass]="{'is-invalid': f.hotel.touched && f.hotel.invalid, 'is-valid': f.hotel.touched && f.hotel.valid}">
          <option value="">Seleccione un hotel</option>
          <option *ngFor="let s of sucursales" [value]="s.codigo">{{ s.nombre }}</option>
        </select>
        <div *ngIf="f.hotel.touched && f.hotel.invalid" class="invalid-feedback">
          El hotel es obligatorio.
        </div>
      </div>
      <div class="mb-3">
        <label for="empleado" class="form-label">Empleado:</label>
        <select id="empleado" formControlName="empleado" class="form-select"
          [ngClass]="{'is-invalid': f.empleado.touched && f.empleado.invalid, 'is-valid': f.empleado.touched && f.empleado.valid}">
          <option value="">Seleccione un empleado</option>
          <option *ngFor="let e of empleados" [value]="e.email">
            {{ e.nombre }} {{ e.apellidos }}
          </option>
        </select>
        <div *ngIf="f.empleado.touched && f.empleado.invalid" class="invalid-feedback">
          El empleado es obligatorio.
        </div>
      </div>
    </div>
  
    <!-- Datos Cliente -->
    <div class="card shadow-sm p-3 mb-4">
      <h5 class="card-title">Datos Cliente</h5>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="nombreC" class="form-label">Nombre:</label>
          <input type="text" id="nombreC" formControlName="nombreC" class="form-control" placeholder="Nombre"
            [ngClass]="{'is-invalid': f.nombreC.touched && f.nombreC.invalid, 'is-valid': f.nombreC.touched && f.nombreC.valid}">
          <div *ngIf="f.nombreC.touched && f.nombreC.invalid" class="invalid-feedback">
            El nombre es obligatorio.
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="apellidoC" class="form-label">Apellidos:</label>
          <input type="text" id="apellidoC" formControlName="apellidoC" class="form-control" placeholder="Apellidos"
            [ngClass]="{'is-invalid': f.apellidoC.touched && f.apellidoC.invalid, 'is-valid': f.apellidoC.touched && f.apellidoC.valid}">
          <div *ngIf="f.apellidoC.touched && f.apellidoC.invalid" class="invalid-feedback">
            Los apellidos son obligatorios.
          </div>
        </div>
      </div>
      <div class="mb-3">
        <label for="habitacionC" class="form-label">Habitación:</label>
        <select id="habitacionC" formControlName="habitacionC" class="form-select"
          [ngClass]="{'is-invalid': f.habitacionC.touched && f.habitacionC.invalid, 'is-valid': f.habitacionC.touched && f.habitacionC.valid}">
          <option value="">Número</option>
          <option *ngFor="let n of [101,102,103,201,202,203]" [value]="n">{{ n }}</option>
        </select>
        <div *ngIf="f.habitacionC.touched && f.habitacionC.invalid" class="invalid-feedback">
          La habitación es obligatoria.
        </div>
      </div>
      <div class="mb-3">
        <label for="agencia" class="form-label">Agencia:</label>
        <input type="text" id="agencia" formControlName="agencia" class="form-control" placeholder="Nombre de la Agencia">
      </div>
      <div class="mb-3">
        <label for="telefonoC" class="form-label">Teléfono:</label>
        <input type="text" id="telefonoC" formControlName="telefonoC" class="form-control" placeholder="Teléfono"
          [ngClass]="{'is-invalid': f.telefonoC.touched && f.telefonoC.invalid, 'is-valid': f.telefonoC.touched && f.telefonoC.valid}">
        <div *ngIf="f.telefonoC.touched && f.telefonoC.invalid" class="invalid-feedback">
          El teléfono es obligatorio y debe contener solo números, espacios o el signo +.
        </div>
      </div>
    </div>
  
    <!-- Datos del Evento -->
    <div class="card shadow-sm p-3 mb-4">
      <h5 class="card-title">Datos del Evento</h5>
      <div class="mb-3">
        <label for="tituloE" class="form-label">Título:</label>
        <input type="text" id="tituloE" formControlName="tituloE" class="form-control" placeholder="Título"
          [ngClass]="{'is-invalid': f.tituloE.touched && f.tituloE.invalid, 'is-valid': f.tituloE.touched && f.tituloE.valid}">
        <div *ngIf="f.tituloE.touched && f.tituloE.invalid" class="invalid-feedback">
          El título es obligatorio.
        </div>
      </div>
      <div class="mb-3">
        <label for="descripcionE" class="form-label">Descripción:</label>
        <textarea id="descripcionE" formControlName="descripcionE" class="form-control" rows="3" placeholder="Descripción"
          [ngClass]="{'is-invalid': f.descripcionE.touched && f.descripcionE.invalid, 'is-valid': f.descripcionE.touched && f.descripcionE.valid}"></textarea>
        <div *ngIf="f.descripcionE.touched && f.descripcionE.invalid" class="invalid-feedback">
          La descripción es obligatoria.
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">Categoría:</label>
        <div class="d-flex gap-3">
          <div class="form-check">
            <input type="radio" id="tipoRegistro" formControlName="categoria" value="registro" class="form-check-input">
            <label for="tipoRegistro" class="form-check-label">
              <i class="bi bi-clipboard-check me-2"></i> Registro Ordinario
            </label>
          </div>
          <div class="form-check">
            <input type="radio" id="tipoIncidencia" formControlName="categoria" value="incidencia" class="form-check-input">
            <label for="tipoIncidencia" class="form-check-label">
              <i class="bi bi-exclamation-triangle-fill me-2"></i> Incidencia
            </label>
          </div>
          <div class="form-check">
            <input type="radio" id="tipoAlerta" formControlName="categoria" value="alerta" class="form-check-input">
            <label for="tipoAlerta" class="form-check-label">
              <i class="bi bi-exclamation-diamond-fill me-2"></i> Alerta
            </label>
          </div>
        </div>
        <div *ngIf="f.categoria.touched && f.categoria.invalid" class="text-danger mt-1">
          La categoría es obligatoria.
        </div>
      </div>
      <div class="mb-3">
        <label for="tipoE" class="form-label">Tipo de Evento:</label>
        <select id="tipoE" formControlName="tipoE" class="form-select"
          [ngClass]="{'is-invalid': f.tipoE.touched && f.tipoE.invalid, 'is-valid': f.tipoE.touched && f.tipoE.valid}">
          <option value="" selected disabled>Selecciona una categoría primero</option>
          <!-- Opciones dinámicas filtradas por categoría -->
          <option *ngFor="let inc of incidenciasPredefinidas" [value]="inc.nombre" *ngIf="inc.tipo === f.categoria.value">
            {{ inc.nombre }}
          </option>
        </select>
        <div *ngIf="f.tipoE.touched && f.tipoE.invalid" class="invalid-feedback">
          El tipo de evento es obligatorio.
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="fechaE" class="form-label">Fecha:</label>
          <input type="date" id="fechaE" formControlName="fechaE" class="form-control"
            [ngClass]="{'is-invalid': f.fechaE.touched && f.fechaE.invalid, 'is-valid': f.fechaE.touched && f.fechaE.valid}">
          <div *ngIf="f.fechaE.touched && f.fechaE.invalid" class="invalid-feedback">
            La fecha es obligatoria.
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="horaE" class="form-label">Hora:</label>
          <input type="time" id="horaE" formControlName="horaE" class="form-control"
            [ngClass]="{'is-invalid': f.horaE.touched && f.horaE.invalid, 'is-valid': f.horaE.touched && f.horaE.valid}">
          <div *ngIf="f.horaE.touched && f.horaE.invalid" class="invalid-feedback">
            La hora es obligatoria.
          </div>
        </div>
      </div>
    </div>
  
    <!-- Botón de envío -->
    <div class="text-center">
      <button type="submit" class="btn btn-primary" [disabled]="registroForm.invalid">Registrar Evento</button>
    </div>
  </form>
  